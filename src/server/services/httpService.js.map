{"version":3,"file":"httpService.js","names":["Wreck","request","method","url","options","res","payload","statusCode","error","Error","get","getJson","json","post","postJson","put"],"sources":["../../../src/server/services/httpService.ts"],"sourcesContent":["import Wreck from '@hapi/wreck'\n\nexport type Method = keyof Pick<typeof Wreck, 'get' | 'post' | 'put' | 'delete'>\nexport type RequestOptions = Parameters<typeof Wreck.defaults>[0]\n\nexport const request = async <BodyType = Buffer>(\n  method: Method,\n  url: string,\n  options?: RequestOptions\n) => {\n  const { res, payload } = await Wreck[method]<BodyType>(url, options)\n\n  if (!res.statusCode || res.statusCode < 200 || res.statusCode > 299) {\n    return { res, error: payload || new Error('Unknown error') }\n  }\n\n  return { res, payload }\n}\n\nexport const get = <BodyType>(url: string, options?: RequestOptions) => {\n  return request<BodyType>('get', url, options)\n}\n\nexport const getJson = <BodyType extends object>(url: string) => {\n  return get<BodyType>(url, { json: true })\n}\n\nexport const post = <BodyType>(url: string, options: RequestOptions) => {\n  return request<BodyType>('post', url, options)\n}\n\nexport const postJson = <BodyType extends object>(\n  url: string,\n  options: RequestOptions\n) => {\n  return post<BodyType>(url, {\n    ...options,\n    json: true\n  })\n}\n\nexport const put = <BodyType>(url: string, options: RequestOptions) => {\n  return request<BodyType>('put', url, options)\n}\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,aAAa;AAK/B,OAAO,MAAMC,OAAO,GAAG,MAAAA,CACrBC,MAAc,EACdC,GAAW,EACXC,OAAwB,KACrB;EACH,MAAM;IAAEC,GAAG;IAAEC;EAAQ,CAAC,GAAG,MAAMN,KAAK,CAACE,MAAM,CAAC,CAAWC,GAAG,EAAEC,OAAO,CAAC;EAEpE,IAAI,CAACC,GAAG,CAACE,UAAU,IAAIF,GAAG,CAACE,UAAU,GAAG,GAAG,IAAIF,GAAG,CAACE,UAAU,GAAG,GAAG,EAAE;IACnE,OAAO;MAAEF,GAAG;MAAEG,KAAK,EAAEF,OAAO,IAAI,IAAIG,KAAK,CAAC,eAAe;IAAE,CAAC;EAC9D;EAEA,OAAO;IAAEJ,GAAG;IAAEC;EAAQ,CAAC;AACzB,CAAC;AAED,OAAO,MAAMI,GAAG,GAAGA,CAAWP,GAAW,EAAEC,OAAwB,KAAK;EACtE,OAAOH,OAAO,CAAW,KAAK,EAAEE,GAAG,EAAEC,OAAO,CAAC;AAC/C,CAAC;AAED,OAAO,MAAMO,OAAO,GAA6BR,GAAW,IAAK;EAC/D,OAAOO,GAAG,CAAWP,GAAG,EAAE;IAAES,IAAI,EAAE;EAAK,CAAC,CAAC;AAC3C,CAAC;AAED,OAAO,MAAMC,IAAI,GAAGA,CAAWV,GAAW,EAAEC,OAAuB,KAAK;EACtE,OAAOH,OAAO,CAAW,MAAM,EAAEE,GAAG,EAAEC,OAAO,CAAC;AAChD,CAAC;AAED,OAAO,MAAMU,QAAQ,GAAGA,CACtBX,GAAW,EACXC,OAAuB,KACpB;EACH,OAAOS,IAAI,CAAWV,GAAG,EAAE;IACzB,GAAGC,OAAO;IACVQ,IAAI,EAAE;EACR,CAAC,CAAC;AACJ,CAAC;AAED,OAAO,MAAMG,GAAG,GAAGA,CAAWZ,GAAW,EAAEC,OAAuB,KAAK;EACrE,OAAOH,OAAO,CAAW,KAAK,EAAEE,GAAG,EAAEC,OAAO,CAAC;AAC/C,CAAC","ignoreList":[]}