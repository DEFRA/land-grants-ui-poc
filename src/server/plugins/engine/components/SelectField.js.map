{"version":3,"file":"SelectField.js","names":["ListFormComponent","SelectField","constructor","def","props","options","formSchema","required","allow","empty","getViewModel","payload","errors","viewModel","items","value"],"sources":["../../../../../src/server/plugins/engine/components/SelectField.ts"],"sourcesContent":["import {\n  type AutocompleteFieldComponent,\n  type SelectFieldComponent\n} from '@defra/forms-model'\n\nimport { ListFormComponent } from '~/src/server/plugins/engine/components/ListFormComponent.js'\nimport {\n  type FormPayload,\n  type FormSubmissionError\n} from '~/src/server/plugins/engine/types.js'\n\nexport class SelectField extends ListFormComponent {\n  declare options:\n    | SelectFieldComponent['options']\n    | AutocompleteFieldComponent['options']\n\n  constructor(\n    def: SelectFieldComponent | AutocompleteFieldComponent,\n    props: ConstructorParameters<typeof ListFormComponent>[1]\n  ) {\n    super(def, props)\n\n    const { options } = def\n    let { formSchema } = this\n\n    if (options.required === false) {\n      formSchema = formSchema.allow('')\n    } else {\n      formSchema = formSchema.empty('')\n    }\n\n    this.formSchema = formSchema\n    this.options = options\n  }\n\n  getViewModel(payload: FormPayload, errors?: FormSubmissionError[]) {\n    const viewModel = super.getViewModel(payload, errors)\n    let { items } = viewModel\n\n    items = [{ value: '' }, ...items]\n\n    return {\n      ...viewModel,\n      items\n    }\n  }\n}\n"],"mappings":"AAKA,SAASA,iBAAiB;AAM1B,OAAO,MAAMC,WAAW,SAASD,iBAAiB,CAAC;EAKjDE,WAAWA,CACTC,GAAsD,EACtDC,KAAyD,EACzD;IACA,KAAK,CAACD,GAAG,EAAEC,KAAK,CAAC;IAEjB,MAAM;MAAEC;IAAQ,CAAC,GAAGF,GAAG;IACvB,IAAI;MAAEG;IAAW,CAAC,GAAG,IAAI;IAEzB,IAAID,OAAO,CAACE,QAAQ,KAAK,KAAK,EAAE;MAC9BD,UAAU,GAAGA,UAAU,CAACE,KAAK,CAAC,EAAE,CAAC;IACnC,CAAC,MAAM;MACLF,UAAU,GAAGA,UAAU,CAACG,KAAK,CAAC,EAAE,CAAC;IACnC;IAEA,IAAI,CAACH,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACD,OAAO,GAAGA,OAAO;EACxB;EAEAK,YAAYA,CAACC,OAAoB,EAAEC,MAA8B,EAAE;IACjE,MAAMC,SAAS,GAAG,KAAK,CAACH,YAAY,CAACC,OAAO,EAAEC,MAAM,CAAC;IACrD,IAAI;MAAEE;IAAM,CAAC,GAAGD,SAAS;IAEzBC,KAAK,GAAG,CAAC;MAAEC,KAAK,EAAE;IAAG,CAAC,EAAE,GAAGD,KAAK,CAAC;IAEjC,OAAO;MACL,GAAGD,SAAS;MACZC;IACF,CAAC;EACH;AACF","ignoreList":[]}